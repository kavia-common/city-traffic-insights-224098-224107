{"is_source_file": true, "format": "JavaScript", "description": "This file defines a traffic data service for a city, including functions to generate simulated traffic segments, provide real-time snapshots with traffic metrics, retrieve historical data, and perform simple predictions. It interacts with a MongoDB model for persistence and exports core functions for external use.", "external_files": ["../logger", "../models/TrafficRecord"], "external_methods": ["TrafficRecord.insertMany", "TrafficRecord.find"], "published": ["store", "getDbHistory"], "classes": [{"name": "TrafficStore", "description": "In-memory datastore for traffic segments, providing simulated live data, historical retrieval, and prediction functionalities."}], "methods": [{"name": "generateSegments(seed = 24)", "description": "Creates a set of simulated road segments with random coordinates and base speeds/densities.", "scope": "", "scopeKind": ""}, {"name": "mulberry32(a)", "description": "Deterministic pseudo-random number generator used for reproducible simulation.", "scope": "", "scopeKind": ""}, {"name": "lerp(a, b, t)", "description": "Linear interpolation function.", "scope": "", "scopeKind": ""}, {"name": "AnonymousFunction3838e37e0100()", "scope": "mulberry32", "scopeKind": "function", "description": "unavailable"}, {"name": "constructor()", "scope": "TrafficStore", "scopeKind": "class", "description": "unavailable"}, {"name": "gaussianPeak(x, center, width)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getDbHistory({ fromISO, toISO, limit = 50, city = 'Bangalore' } = {})", "scope": "TrafficStore", "scopeKind": "class", "description": "unavailable"}, {"name": "getHistory(fromISO, toISO)", "scope": "TrafficStore", "scopeKind": "class", "description": "unavailable"}, {"name": "getLiveSnapshot()", "scope": "TrafficStore", "scopeKind": "class", "description": "unavailable"}, {"name": "predictShortTerm(horizonMinutes = 15)", "scope": "TrafficStore", "scopeKind": "class", "description": "unavailable"}], "calls": ["TrafficRecord.insertMany", "TrafficRecord.find"], "search-terms": ["traffic simulation Bangalore", "generateSegments", "TrafficStore", "getDbHistory", "predictShortTerm"], "state": 2, "file_id": 15, "knowledge_revision": 55, "git_revision": "fa132d5faf7b5336615e3b7aeea2bd03a3319a9f", "revision_history": [{"31": ""}, {"53": "fa132d5faf7b5336615e3b7aeea2bd03a3319a9f"}, {"54": "fa132d5faf7b5336615e3b7aeea2bd03a3319a9f"}, {"55": "fa132d5faf7b5336615e3b7aeea2bd03a3319a9f"}], "ctags": [{"_type": "tag", "name": "AnonymousFunction3838e37e0100", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  return function () {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "mulberry32", "scopeKind": "function"}, {"_type": "tag", "name": "BBOX", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^const BBOX = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "TrafficRecord", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^const TrafficRecord = require('..\\/models\\/TrafficRecord');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TrafficStore", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^class TrafficStore {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^      city: 'Bangalore',$/", "language": "JavaScript", "kind": "property", "scope": "TrafficStore.getLiveSnapshot.snapshot", "scopeKind": "class"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^    const query = { city };$/", "language": "JavaScript", "kind": "field", "scope": "TrafficStore.getDbHistory.query", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "TrafficStore", "scopeKind": "class"}, {"_type": "tag", "name": "features", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^      features$/", "language": "JavaScript", "kind": "field", "scope": "TrafficStore.getLiveSnapshot.snapshot", "scopeKind": "class"}, {"_type": "tag", "name": "gaussianPeak", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^function gaussianPeak(x, center, width) {$/", "language": "JavaScript", "kind": "function", "signature": "(x, center, width)"}, {"_type": "tag", "name": "generateSegments", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^function generateSegments(seed = 24) {$/", "language": "JavaScript", "kind": "function", "signature": "(seed = 24)"}, {"_type": "tag", "name": "getDbHistory", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  async getDbHistory({ fromISO, toISO, limit = 50, city = 'Bangalore' } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ fromISO, toISO, limit = 50, city = 'Bangalore' } = {})", "scope": "TrafficStore", "scopeKind": "class"}, {"_type": "tag", "name": "getHistory", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  getHistory(fromISO, toISO) {$/", "language": "JavaScript", "kind": "method", "signature": "(fromISO, toISO)", "scope": "TrafficStore", "scopeKind": "class"}, {"_type": "tag", "name": "getLiveSnapshot", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  getLiveSnapshot() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "TrafficStore", "scopeKind": "class"}, {"_type": "tag", "name": "lerp", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^function lerp(a, b, t) { return a + (b - a) * t; }$/", "language": "JavaScript", "kind": "function", "signature": "(a, b, t)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^const logger = require('..\\/logger');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "maxLat", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  maxLat: 13.12,$/", "language": "JavaScript", "kind": "property", "scope": "BBOX", "scopeKind": "class"}, {"_type": "tag", "name": "maxLng", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  maxLng: 77.75$/", "language": "JavaScript", "kind": "property", "scope": "BBOX", "scopeKind": "class"}, {"_type": "tag", "name": "minLat", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  minLat: 12.85,$/", "language": "JavaScript", "kind": "property", "scope": "BBOX", "scopeKind": "class"}, {"_type": "tag", "name": "minLng", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  minLng: 77.45,$/", "language": "JavaScript", "kind": "property", "scope": "BBOX", "scopeKind": "class"}, {"_type": "tag", "name": "mulberry32", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^function mulberry32(a) {$/", "language": "JavaScript", "kind": "function", "signature": "(a)"}, {"_type": "tag", "name": "predictShortTerm", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  predictShortTerm(horizonMinutes = 15) {$/", "language": "JavaScript", "kind": "method", "signature": "(horizonMinutes = 15)", "scope": "TrafficStore", "scopeKind": "class"}, {"_type": "tag", "name": "snapshot", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^    const snapshot = {$/", "language": "JavaScript", "kind": "class", "scope": "TrafficStore.getLiveSnapshot", "scopeKind": "class"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^  store,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^const store = new TrafficStore();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/city-traffic-insights-224098-224107/traffic_backend/src/services/traffic.js", "pattern": "/^      timestamp: now.toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "TrafficStore.getLiveSnapshot.snapshot", "scopeKind": "class"}], "hash": "8fc412c014273d3417fe90f918533361", "format-version": 4, "code-base-name": "traffic_backend", "filename": "traffic_backend/src/services/traffic.js", "fields": [{"name": "city: 'Bangalore',", "scope": "TrafficStore.getLiveSnapshot.snapshot", "scopeKind": "class", "description": "unavailable"}, {"name": "const query = { city };", "scope": "TrafficStore.getDbHistory.query", "scopeKind": "class", "description": "unavailable"}, {"name": "features", "scope": "TrafficStore.getLiveSnapshot.snapshot", "scopeKind": "class", "description": "unavailable"}, {"name": "maxLat: 13.12,", "scope": "BBOX", "scopeKind": "class", "description": "unavailable"}, {"name": "maxLng: 77.75", "scope": "BBOX", "scopeKind": "class", "description": "unavailable"}, {"name": "minLat: 12.85,", "scope": "BBOX", "scopeKind": "class", "description": "unavailable"}, {"name": "minLng: 77.45,", "scope": "BBOX", "scopeKind": "class", "description": "unavailable"}, {"name": "store,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "timestamp: now.toISOString(),", "scope": "TrafficStore.getLiveSnapshot.snapshot", "scopeKind": "class", "description": "unavailable"}]}